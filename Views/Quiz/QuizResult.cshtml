@model QuizApp.Models.QuizResultViewModel
@using System.Text.Json

@{
    ViewData["Title"] = "Quiz Result";

    // Vue-friendly JSON object
    var resultJson = JsonSerializer.Serialize(new {
        title = Model.QuizTitle ?? "",
        earned = Model.EarnedPoints,
        total = Model.TotalPoints
    });
}

<div id="quiz-result-app" class="mt-4">

    <h1>Quiz Result</h1>

    <h2>{{ result.title }}</h2>

    <p>
        <strong>You scored:</strong>
        {{ result.earned }} / {{ result.total }} points
    </p>

    <a href="/Quiz" class="btn btn-primary mt-3">Back to Quizzes</a>

</div>

@section Scripts {

    <script>
        const { createApp } = Vue;

        // Load server JSON safely
        const initial = @Html.Raw(resultJson);

        createApp({
            data() {
                return {
                    result: initial
                };
            }
        }).mount("#quiz-result-app");

        // client side error handler
        window.addEventListener("error", function (event) {
            console.error("Client error on Quiz Result page:", event.error || event.message);
        });
    </script>
}
